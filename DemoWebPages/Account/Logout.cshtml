@{
    WebSecurity.RequireAuthenticatedUser();

    if (IsPost) {
        // Sprawdź, czy żądanie zostało przesłane przez użytkownika.
        AntiForgery.Validate();

        // Wyloguj z bieżącego kontekstu użytkownika
        WebSecurity.Logout();

        // Przekieruj z powrotem pod zwrotny adres URL lub do strony głównej.
        var returnUrl = Request.QueryString["ReturnUrl"];
        Context.RedirectLocal(returnUrl);
    } else {
        Response.Redirect("~/");
    }
}
